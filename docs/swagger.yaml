basePath: /api/v1
definitions:
  ent.MyCard:
    properties:
      card_password:
        description: CardPassword holds the value of the "card_password" field.
        type: string
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      taken_at:
        description: TakenAt holds the value of the "taken_at" field.
        type: string
    type: object
  ent.Notification:
    properties:
      id:
        description: ID of the ent.
        type: string
      message:
        description: Message holds the value of the "message" field.
        type: string
      read_at:
        description: ReadAt holds the value of the "read_at" field.
        type: string
      sent_at:
        description: SentAt holds the value of the "sent_at" field.
        type: string
      type:
        allOf:
        - $ref: '#/definitions/notification.Type'
        description: Type holds the value of the "type" field.
    type: object
  ent.Price:
    properties:
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      description:
        description: Description holds the value of the "description" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      name:
        description: Name holds the value of the "name" field.
        type: string
      taken_at:
        description: TakenAt holds the value of the "taken_at" field.
        type: string
    type: object
  ent.Question:
    properties:
      body:
        description: Body holds the value of the "body" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      type:
        description: Type holds the value of the "type" field.
        type: string
    type: object
  ent.Questionnaire:
    properties:
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      name:
        description: Name holds the value of the "name" field.
        type: string
    type: object
  ent.QuestionnaireResponse:
    properties:
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      id:
        description: ID of the ent.
        type: string
    type: object
  ent.User:
    properties:
      birth_year:
        description: BirthYear holds the value of the "birth_year" field.
        type: integer
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      demented_among_direct_relatives:
        description: DementedAmongDirectRelatives holds the value of the "demented_among_direct_relatives"
          field.
        type: boolean
      ear_condition:
        allOf:
        - $ref: '#/definitions/user.EarCondition'
        description: EarCondition holds the value of the "ear_condition" field.
      education_level:
        allOf:
        - $ref: '#/definitions/user.EducationLevel'
        description: EducationLevel holds the value of the "education_level" field.
      eyesight_condition:
        allOf:
        - $ref: '#/definitions/user.EyesightCondition'
        description: EyesightCondition holds the value of the "eyesight_condition"
          field.
      first_name:
        description: FirstName holds the value of the "first_name" field.
        type: string
      gender:
        allOf:
        - $ref: '#/definitions/user.Gender'
        description: Gender holds the value of the "gender" field.
      head_injury_experience:
        description: HeadInjuryExperience holds the value of the "head_injury_experience"
          field.
        type: boolean
      height:
        description: Height holds the value of the "height" field.
        type: number
      id:
        description: ID of the ent.
        type: string
      last_name:
        description: LastName holds the value of the "last_name" field.
        type: string
      marriage:
        allOf:
        - $ref: '#/definitions/user.Marriage'
        description: Marriage holds the value of the "marriage" field.
      medical_history:
        description: MedicalHistory holds the value of the "medical_history" field.
        type: string
      medication_status:
        description: MedicationStatus holds the value of the "medication_status" field.
        type: string
      occupation:
        allOf:
        - $ref: '#/definitions/user.Occupation'
        description: Occupation holds the value of the "occupation" field.
      smoking_habit:
        allOf:
        - $ref: '#/definitions/user.SmokingHabit'
        description: SmokingHabit holds the value of the "smoking_habit" field.
      updated_at:
        description: UpdatedAt holds the value of the "updated_at" field.
        type: string
      weight:
        description: Weight holds the value of the "weight" field.
        type: number
    type: object
  handlers.HealthStatus:
    description: Datatype of health status
    properties:
      message:
        description: Health message
        type: string
    type: object
  notification.Type:
    enum:
    - normal
    - mycard
    - price
    type: string
    x-enum-varnames:
    - TypeNormal
    - TypeMycard
    - TypePrice
  types.BaseAnswer:
    properties:
      body:
        description: The answer body.
        example: 我這週心情還不錯！
        type: string
      question_id:
        description: |-
          The question this answer relates to, the question also needs to be in
          the same questionnaire as the response.
        type: string
    type: object
  types.BaseQuestion:
    properties:
      body:
        description: The question body
        example: 你這週的心情如何？
        type: string
      type:
        description: |-
          The question type, currently we accept string but in the future this
          field will be enums.
        example: 簡答題
        type: string
    type: object
  types.BaseQuestionnaire:
    description: BaseQuestionnaire
    properties:
      name:
        description: The name of the questionnaire
        example: 問卷標題
        type: string
      questions:
        description: |-
          The initial questions in this questionnaire. This field may be empty
          and you can add questions later using post request to
          `quesionnaires/:id/new/question`.
        items:
          $ref: '#/definitions/types.BaseQuestion'
        type: array
    type: object
  types.BaseResponse:
    properties:
      answers:
        description: The answers to all questions in a questionnaire.
        items:
          $ref: '#/definitions/types.BaseAnswer'
        type: array
      user_id:
        description: The user ID of the user who submit the response.
        type: string
    type: object
  types.BaseUser:
    properties:
      birth_year:
        example: 2000
        type: integer
      demented_among_direct_relatives:
        example: false
        type: boolean
      ear_condition:
        enum:
        - normal
        - slightly_affecting_conversation
        - need_hearing_aid
        example: normal
        type: string
      education_level:
        enum:
        - elementry_school_or_below
        - middle_school
        - high_school
        - bachelor
        - master
        - doctorate
        example: doctorate
        type: string
      eyesight_condition:
        enum:
        - normal
        - slightly_affecting_reading
        - need_glasses
        example: normal
        type: string
      first_name:
        example: 中天
        type: string
      gender:
        example: male
        type: string
      head_injury_experience:
        example: false
        type: boolean
      height:
        example: 185.2
        type: number
      id:
        type: string
      last_name:
        example: 大
        type: string
      marriage:
        enum:
        - single
        - married
        - divorced
        - widowed
        example: single
        type: string
      medical_history:
        example: none
        type: string
      medication_status:
        example: none
        type: string
      occupation:
        enum:
        - student
        - government_employee
        - service_industry
        - industry_and_commerce
        - freelancer
        - domestic
        example: student
        type: string
      smoking_habit:
        enum:
        - none
        - sometimes
        - everyday
        example: none
        type: string
      weight:
        example: 80.3
        type: number
    type: object
  types.NotificationWithRecipient:
    properties:
      id:
        description: ID of the ent.
        type: string
      message:
        description: Message holds the value of the "message" field.
        type: string
      read_at:
        description: ReadAt holds the value of the "read_at" field.
        type: string
      recipient:
        $ref: '#/definitions/ent.User'
      sent_at:
        description: SentAt holds the value of the "sent_at" field.
        type: string
      type:
        allOf:
        - $ref: '#/definitions/notification.Type'
        description: Type holds the value of the "type" field.
    type: object
  types.QuestionWithQuestionnaire:
    properties:
      body:
        description: Body holds the value of the "body" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      questionnaire:
        $ref: '#/definitions/ent.Questionnaire'
      type:
        description: Type holds the value of the "type" field.
        type: string
    type: object
  types.QuestionnaireDetails:
    properties:
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      name:
        description: Name holds the value of the "name" field.
        type: string
      questions:
        items:
          $ref: '#/definitions/ent.Question'
        type: array
      responses:
        items:
          $ref: '#/definitions/types.Response'
        type: array
    type: object
  types.Response:
    properties:
      answers:
        description: The answers to all questions in a questionnaire.
        items:
          $ref: '#/definitions/types.BaseAnswer'
        type: array
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      user_id:
        description: The user ID of the user who submit the response.
        type: string
    type: object
  types.ResponseWithQuestionnaire:
    properties:
      answers:
        description: The answers to all questions in a questionnaire.
        items:
          $ref: '#/definitions/types.BaseAnswer'
        type: array
      created_at:
        description: CreatedAt holds the value of the "created_at" field.
        type: string
      id:
        description: ID of the ent.
        type: string
      questionnaire:
        $ref: '#/definitions/ent.Questionnaire'
      user_id:
        description: The user ID of the user who submit the response.
        type: string
    type: object
  user.EarCondition:
    enum:
    - normal
    - slightly_affecting_conversation
    - need_hearing_aid
    type: string
    x-enum-varnames:
    - EarConditionNormal
    - EarConditionSlightlyAffectingConversation
    - EarConditionNeedHearingAid
  user.EducationLevel:
    enum:
    - elementry_school_or_below
    - middle_school
    - high_school
    - bachelor
    - master
    - doctorate
    type: string
    x-enum-varnames:
    - EducationLevelElementrySchoolOrBelow
    - EducationLevelMiddleSchool
    - EducationLevelHighSchool
    - EducationLevelBachelor
    - EducationLevelMaster
    - EducationLevelDoctorate
  user.EyesightCondition:
    enum:
    - normal
    - slightly_affecting_reading
    - need_glasses
    type: string
    x-enum-varnames:
    - EyesightConditionNormal
    - EyesightConditionSlightlyAffectingReading
    - EyesightConditionNeedGlasses
  user.Gender:
    enum:
    - male
    - female
    - nonbinary
    type: string
    x-enum-varnames:
    - GenderMale
    - GenderFemale
    - GenderNonbinary
  user.Marriage:
    enum:
    - single
    - married
    - divorced
    - widowed
    type: string
    x-enum-varnames:
    - MarriageSingle
    - MarriageMarried
    - MarriageDivorced
    - MarriageWidowed
  user.Occupation:
    enum:
    - student
    - government_employee
    - service_industry
    - industry_and_commerce
    - freelancer
    - domestic
    type: string
    x-enum-varnames:
    - OccupationStudent
    - OccupationGovernmentEmployee
    - OccupationServiceIndustry
    - OccupationIndustryAndCommerce
    - OccupationFreelancer
    - OccupationDomestic
  user.SmokingHabit:
    enum:
    - none
    - sometimes
    - everyday
    type: string
    x-enum-varnames:
    - SmokingHabitNone
    - SmokingHabitSometimes
    - SmokingHabitEveryday
host: health-statistic.dechnology.com.tw
info:
  contact: {}
  description: This is the API documentation for 「健康資料公鏈」.
  title: Web3 - 健康資料公鏈API開發文件
  version: "1.0"
paths:
  /health_check:
    get:
      description: A health checking endpoint to make sure the server is not dead.
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.HealthStatus'
      summary: Health Check
      tags:
      - Health
  /mycards:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/ent.MyCard'
            type: array
      summary: Get MyCards
      tags:
      - MyCard
  /mycards/{id}:
    delete:
      parameters:
      - description: The mycard's ID.
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: Delete MyCard
      tags:
      - MyCard
    get:
      parameters:
      - description: The mycard's ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.MyCard'
      summary: Get MyCard
      tags:
      - MyCard
  /notifications:
    get:
      description: |
        Get all notifications from the database. For each notification, the user who received this notification is also included.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.NotificationWithRecipient'
            type: array
      summary: Get Notifications
      tags:
      - Notification
  /notifications/{id}:
    delete:
      parameters:
      - description: The notification's ID.
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: Delete Notification
      tags:
      - Notification
    get:
      parameters:
      - description: The notification's ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.NotificationWithRecipient'
      summary: Get Notification
      tags:
      - Notification
  /prices:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/ent.Price'
            type: array
      summary: Get Prices
      tags:
      - Price
  /prices/{id}:
    delete:
      parameters:
      - description: The price's ID.
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: Delete Price
      tags:
      - Price
    get:
      parameters:
      - description: The price's ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.Price'
      summary: Get Price
      tags:
      - Price
  /questionnaires:
    get:
      description: |
        Get all questionnaires from the database. For each questionnaire, all questions and responses of this questionnaire are also included.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.QuestionnaireDetails'
            type: array
      summary: Get Questionnaires
      tags:
      - Questionnaire
    post:
      consumes:
      - application/json
      description: "Create a new questionnaire and optionally its questions.\n\n##
        Request Body\n\n- `name` *`string`* **Required**\n    The name of the questionnaire
        to be created.\n\n- `questions` *`array`* Optional\n    The initial questions
        in this questionnaire. This field may be empty and you can add questions later
        using post request to `quesionnaires/:id/new/question`.\n    \n    - `body`
        *`string`* **Required**\n        The body of one of the question in the questionnaire.\n
        \   \n    - `type` *`string`* **Required**\n        The type of the question.
        For now, we accept all strings but in the future this field might be an enum."
      parameters:
      - description: The questionnaire to be created.
        in: body
        name: questionnaire
        required: true
        schema:
          $ref: '#/definitions/types.BaseQuestionnaire'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.Questionnaire'
      summary: Create Questionnaire
      tags:
      - Questionnaire
  /questionnaires/{id}:
    delete:
      description: Delete the questionnaire specified by the `id` path param.
      parameters:
      - description: The questionnaire's ID.
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: Delete Questionnaire
      tags:
      - Questionnaire
    get:
      description: |
        Get the questionnaire specified by the `id` path param. All questions and responses of the questionnaire are also included.
      parameters:
      - description: The questionnaire's ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.QuestionnaireDetails'
      summary: Get Questionnaire
      tags:
      - Questionnaire
  /questionnaires/{id}/new/question:
    post:
      consumes:
      - application/json
      description: |-
        Create a new question for the questionnaire  by the `id` path param.

        ## Request Body

        - `body` *`string`* **Required**
            The body of one of the question in the questionnaire.

        - `type` *`string`* **Required**
            The type of the question. For now, we accept all strings but in the future this field might be an enum.
      parameters:
      - description: The questionnaire's ID.
        in: path
        name: id
        required: true
        type: string
      - description: The question to be created.
        in: body
        name: question
        required: true
        schema:
          $ref: '#/definitions/types.BaseQuestion'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.Question'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ent.Question'
      summary: Create Question
      tags:
      - Questionnaire
  /questionnaires/{id}/new/response:
    post:
      consumes:
      - application/json
      description: "Create a new response for the questionnaire specified by `id`
        path param.\n\n## Request Body\n\n- `user_id` *`string`* **Required**\n    The
        user auth0 ID. This is the user who submits this response.\n\n- `answers`
        *`array`* **Required**\n    The answers to the questions in the questionnaire
        submitted by the user above.Note that the length of the answers array must
        equal to the number of questions in the given questionnaire. Also, all the
        `question_id`s must match the questions in the questionnaire.\n \n    - `question_id`
        *`string`* **Required**\n    The question id of a question in the questionnaire
        which this answer correspond to.\n\n    - `body` *`string`* **Required**\n
        \   The body of the answer.\n"
      parameters:
      - description: The questionnaire's ID.
        in: path
        name: id
        required: true
        type: string
      - description: The response to be created.
        in: body
        name: response
        required: true
        schema:
          $ref: '#/definitions/types.BaseResponse'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.QuestionnaireResponse'
      summary: Create Response
      tags:
      - Questionnaire
  /questions:
    get:
      description: |
        Get all questions from the database. **This will NOT include questionnaires and responses.**
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.QuestionWithQuestionnaire'
            type: array
      summary: Get Questions
      tags:
      - Question
  /questions/{id}:
    delete:
      description: Delete the question specified by the `id` path param.
      parameters:
      - description: The question's ID.
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: Delete Question
      tags:
      - Question
    get:
      description: |
        Get the question specified by the `id` path param.
      parameters:
      - description: The question's ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.QuestionWithQuestionnaire'
      summary: Get Question
      tags:
      - Question
  /responses:
    get:
      description: |
        Get all responses from the database. **This will NOT include questionnaires and questions.**
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.ResponseWithQuestionnaire'
            type: array
      summary: Get Responses
      tags:
      - Response
  /responses/{id}:
    delete:
      description: Delete the response specified by the `id` path param.
      parameters:
      - description: The response's ID.
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: Delete Response
      tags:
      - Response
    get:
      description: |
        Get the response specified by the `id` path param. **This will also includes the corresponding questionnaire.**
      parameters:
      - description: The response's ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.ResponseWithQuestionnaire'
      summary: Get Response
      tags:
      - Response
  /users:
    get:
      description: Get all users from the database.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/ent.User'
            type: array
      summary: Get Users
      tags:
      - User
    post:
      consumes:
      - application/json
      description: |-
        Create a new user.

        ## Request Body

        - `first_name` *`string`* **Required**
            The body of one of the question in the questionnaire.

        - `last_name` *`string`* **Required**
            The type of the question. For now, we accept all strings but in the future this field might be an enum.
      parameters:
      - description: The user to be created
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/types.BaseUser'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.User'
      summary: Create User
      tags:
      - User
  /users/{id}:
    delete:
      parameters:
      - description: The user's Auth0 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: Delete User
      tags:
      - User
    get:
      description: |
        Get the user specified by the `id` path param.
      parameters:
      - description: The user's Auth0 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.User'
      summary: Get User
      tags:
      - User
    put:
      consumes:
      - application/json
      parameters:
      - description: The user's Auth0 ID
        in: path
        name: id
        required: true
        type: string
      - description: user to be updated
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/ent.User'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ent.User'
      summary: Update User
      tags:
      - User
  /users/{id}/mycards:
    get:
      parameters:
      - description: The user's Auth0 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/ent.MyCard'
            type: array
      summary: Get All MyCards From an User
      tags:
      - User
  /users/{id}/notifications:
    get:
      description: |
        Get all notifications of an user.
      parameters:
      - description: The user's Auth0 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              items:
                $ref: '#/definitions/ent.Notification'
              type: array
            type: array
      summary: Get All Notifications From an User
      tags:
      - User
  /users/{id}/prices:
    get:
      parameters:
      - description: The user's Auth0 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/ent.Price'
            type: array
      summary: Get All Prices From an User
      tags:
      - User
schemes:
- https
swagger: "2.0"
